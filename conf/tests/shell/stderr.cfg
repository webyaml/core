# filename: conf/tests/shell/stderr.cfg
# path: /tests/shell/stderr

############################################################
##
## Tests : Shell : stderr
##
## send exit 1 to the shell and capture output on stderr
##
############################################################


noindent:
content:
	-
		noindent:
		preprocess:
			type: lib.processors.shell.Shell
			cmd: 'exit 1'
			stderr:
				format: string
				store: shell_stderr
	-
		noindent:
		preprocess:
			type: lib.processors.logic.Evaluate
			expression: |
				"{{md5(shell_stderr)}}" == "{{"Command 'exit 1' returned non-zero exit status 1".md5()}}"
			'true':
				content:
					noindent:
					value: 'pass'
			'false':
				content:
					noindent:
					value: 'fail'